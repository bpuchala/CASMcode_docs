---
title: "ClusterSpecs"
permalink: /formats/casm/clusterography/ClusterSpecs/
---

ClusterSpecs implement methods for generating orbits of clusters:
- `"periodic_max_length"`: For generating orbits of clusters with the translational symmetry of the prim lattice and using the prim factor group.
- `"local_max_length"`: For generating orbits in the local environment of a particular "phenomenal cluster" using a subgroup of the prim factor group that leaves the phenomenal cluster invariant.  

Notes on the naming conventions:
- An "orbit" is the set of all equivalent objects under some generating symmetry group. It
  is a general term, and in different contexts within CASM could be used for orbits of
  clusters, orbits of functions, or orbits of other objects.
- There are infinitely many orbits of 2-site clusters, corresponding to 1st nearest neighbor basis sites, 2nd nearest neighbor basis sites, 3rd nearest neighbor basis sites, etc. The same applies to 3-site clusters, 4-site clusters, etc.
- The "orbit tree" of all clusters is made up of "orbit branches" where each "branch" of the "orbit tree" is made up of all clusters with the same number of sites. For example, the n=2 "orbit branch" consists of all orbits of 2-site clusters, the n=3 "orbit branch" consists of all orbits of 3-site clusters, etc.

Notes on cluster generation methods:
- Clusters are generated recursively, meaning 2-site clusters are generated by attempting to add sites to 1-site clusters, 3-site clusters are generated by attempting to add sites to 2-site clusters, etc. This means that some (n+1)-site clusters that would otherwise be included may not be if the (n+1)-site cluster `max_length` is greater than the n-site cluster `max_length`.

### JSON Attributes

- `method`: string (required)

  Specify which cluster orbit generating method will be used. One of:
  - `"periodic_max_length"`: Clusters differing by a lattice translation are considered equivalent. Cluster generation is truncated by specifying the maximum distance between sites in a cluster for 2-site, 3-site, etc. clusters. The site clusters comprising the asymmetric unit of the prim structure are always included. This is the appropriate method for cluster expansions of crystal properties.
  - `"local_max_length"`: Clusters differing by a lattice translation are considered distinct. Cluster generation is truncated by specifying for 2-site, 3-site, etc. clusters the radius of sites from "phenomenal" cluster include, and the maximum distance between sites in a cluster. This is the appropriate method for cluster expansions of properties associated with the "phenomenal" cluster.

- `params`: object (required)

  Specifies parameters for the method selected by `method`. Options depend on the `method` chosen:

  - For method `"periodic_max_length"`:

    - `orbit_branch_specs`: object (optional)

      Cluster generation is truncated by specifying the maximum distance between sites in a cluster for each orbit branch (i.e. 2-site, 3-site, etc. clusters). The null cluster orbit and the 1-site clusters comprising the asymmetric unit of the prim structure are always included.

      Example:

          "orbit_branch_specs": {
              "2": { "max_length": 10.0 },
              "3": { "max_length": 8.0 }
          }

    - `orbit_specs`: array of [IntegralClusterOrbitGenerator](IntegralClusterOrbitGenerator.md) (optional)

      An array of clusters which are used to generate and include orbits of clusters whether or not they meet the `orbit_branch_specs` truncation criteria. See the [IntegralClusterOrbitGenerator](IntegralClusterOrbitGenerator.md) JSON input format.

  - For method `"local_max_length"`:

    - `phenomenal`: [IntegralClusterOrbitGenerator](IntegralClusterOrbitGenerator.md) (required)

      The "phenomenal" cluster about which local clusters are generated. See the [IntegralClusterOrbitGenerator](IntegralClusterOrbitGenerator.md) JSON input format for cluster input (`"include_subclusters"` is not allowed).

      Example:

          {
              "coordinate_mode" : "Integral",
              "sites" : [
                  [ 0, 0, 0, 0 ],
                  [ 0, 1, 0, 0 ]]
          }

    - `generating_group`: array of int (required)

      An array of indices into the prim factor group specifying the invariant group of the "phenomenal" cluster which should be used to generate local cluster orbits. Generating group indices can be found by first generating a basis set using the `periodic_max_length` method and then finding the the `invariant_group` printed for prototype clusters in the [`clust.json` file](../../project_directory_structure.md#basis-sets-dir). In some contexts, the relevant symmetry is lower than that determined from the phenomenal cluster sites alone. Given the factor group operations indicated, the translational components of the symmetry operations are determined which leave the cluster invariant.

    - `orbit_branch_specs`: object (optional)

      All sites within `cutoff_radius` distance of any site in the phenomenal cluster are considered candidates for inclusion in clusters of a particular orbit branch. Cluster generation is truncated by specifying the maximum distance between sites in a cluster for each orbit branch. The `max_length` parameter is not necessary for 1-site clusters and ignored if present. The null cluster orbit is always included.

      Example:

          "orbit_branch_specs": {
              "1": { "cutoff_radius": 6.0 },
              "2": { "max_length": 9.0, "cutoff_radius": 6.0 },
              "3": { "max_length": 8.0, "cutoff_radius": 6.0 }
          }

    - `orbit_specs`: array of [IntegralClusterOrbitGenerator](IntegralClusterOrbitGenerator.md) (optional)

      An array of clusters which are used to generate and include orbits of clusters whether or not they meet the `orbit_branch_specs` truncation criteria. See the [IntegralClusterOrbitGenerator](IntegralClusterOrbitGenerator.md) JSON input format.


### Examples

#### Example 1) Periodic clusters
```
{
  "method": "periodic_max_length",
  "params": {
    "orbit_branch_specs": {
      "2" : {"max_length" : 6.},
      "3" : {"max_length" : 3.}
    },
    "orbit_specs": [
      {
        "coordinate_mode" : "Integral",
        "sites" : [
          [ 0, 0, 0, 0 ],
          [ 1, 0, 0, 0 ],
          [ 0, 1, 0, 0 ],
          [ 1, 1, 0, 0 ]],
        "include_subclusters": true
      }
    ]
  }
}
```

#### Example 2) Local clusters
```
{
  "method": "local_max_length",
  "params": {
    "phenomenal": {
      "coordinate_mode": "Integral",
      "sites": [
        [ 1, 0, 0, 0 ],
        [ 0, 1, 0, 0 ]
      ]
    },
    "generating_group": [ 0, 7, 11, 17, 18, 19, 26, 27, 28, 33, 37, 47 ],
    "orbit_branch_specs": {
      "1" : {"cutoff_radius": 6.},
      "2" : {"cutoff_radius": 3., "max_length" : 3.}
    }
  }
}
```
